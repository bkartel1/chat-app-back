# Language setting
language: node_js

# Version number
node_js:
  - 7.4.0

branches:
  only:
    - master

env:
  global:
    # Docker hub repo
    - TEST_ENV_VAR=fooBar
build:
  ci:
    # Specific version is used to avoid issues due to version differencies
    - npm install npm@5.3.0 -g
    - npm -v
    - npm install
    - npm test

  on_success:
    - echo $TEST_ENV_VAR
    #- docker build -f Dockerfile.prod -t ${DOCKER_HUB_REPO}:${BUILD_NUMBER}
    #- docker push ${DOCKER_HUB_REPO}:${BUILD_NUMBER}

integrations:
  hub:
    - integrationName: DockerRegistryIntegration
      type: dockerRegistryLogin

  notifications:
    - integrationName: email
      type: email
      on_success: never
      on_failure: never
      on_pull_request: never
